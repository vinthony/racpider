{"name":"Racpider","tagline":"a spider framework base on python","body":"# racpider\r\n\r\n\r\n## getting start\r\n\r\n```shell\r\n#服务器端\r\n./src/monitor.py\r\n\r\n#client端\r\n./src/slaver.py\r\n```\r\n\r\n## enhance\r\n\r\n- [ ] `cil`程序\r\n\r\n## delay\r\n\r\n- [ ] 带cookies的爬虫(增加auth)\r\n\r\n## todo\r\n\r\n- [x] 去掉url的hash\r\n- [x] 增强filter功能，修复match为search\r\n- [x] 将error信息放入error.log中\r\n- [x] 增加`racpider.json`来配置\r\n- [x] 增加默认racpider\r\n- [x] 爬虫网页命名\r\n- [x] 多重结束条件，时间/层次\r\n- [x] 增加分布式功能\r\n- [x] 数据库Queue配置(redis)\r\n- [x] mongodb 来存储内容\r\n\r\n## bugs\r\n- [x] filename too long \r\n\r\n## questions\r\n- [x] 如何高效的存储抓下来的网页的名称? 【使用mongodb存储】\r\n- [x] 分布式生成的html是存在当个集群的db下？如果不这样，返回整个html和正常的过程一致\r\n\r\n## Server\r\n- [x] 配置redis 分配seed url 到slave\r\n- [x] bloom filter 用来过滤已经fetch过得url\r\n- [ ] 分配url策略\r\n\r\n## slave\r\n- [x] 从url接收job\r\n- [x] 存储网页内容\r\n- [x] url使用\r\n- [x] `GET server/pull` 向服务器请求一个job\r\n- [x] `GET server/push` 向服务器push一个结果\r\n\r\n\r\n## changelog\r\n\r\n#### 5月9日\r\n\r\n- 增加cli入口\r\n- fixed download为unicode类型导致无法getlink的问题\r\n- 增加mongodb支持存入数据\r\n\r\n#### 5月14日\r\n\r\n- 增加服务器端数据收集功能\r\n\r\n#### client dependence\r\n\r\n* beautifulsoup4\r\n* pymongo\r\n* mongo\r\n\r\n## server dependence\r\n\r\n* redis\r\n* pymongo\r\n\r\n\r\n## 配置文件在`Racpider.json`中\r\n```js\r\n{\r\n\t\"seeds\":[\"http://news.qq.com/\"], //为要抓取的种子\r\n\t\"regexp\":\"qq.com\", //抓取域名的匹配正则\r\n\t\"name\":\"qq_news\", // 爬虫名称\r\n\t\"redis\":{  //redis配置\r\n\t\t\"host\":\"127.0.0.1\",\r\n\t\t\"port\":\"6379\",\r\n\t\t\"db\":\"0\"\r\n\t},\r\n\t\"mongodb\":{ //客户端mongodb配置\r\n\t\t\"host\":\"127.0.0.1\",\r\n\t\t\"port\":\"20132\",\r\n\t\t\"name\":\"racpider\"\r\n\t\t},\r\n\t\"server\":{ // web服务器配置，用来实现分布式\r\n\t\t\"host\":\"192.168.31.110\",\r\n\t\t\"port\":\"5237\",\r\n\t\t\"debug\":\"False\"\r\n\t},\r\n\t\"auth\":{ //【todo】认证\r\n\t\t\"username\":\"username\",\r\n\t\t\"password\":\"password\"\r\n\t},\r\n\t\"timeout\":\"2\",//超时时间\r\n\t\"sleep\":\"1\", //每次抓取空当时间\r\n\t\"clients\":[ //供master来进行分析\r\n\t\t{\r\n\t\t\t\"host\":\"10.211.55.5\",\r\n\t\t\t\"port\":\"20132\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"host\":\"10.211.55.7\",\r\n\t\t\t\"port\":\"20132\"\r\n\t\t}\r\n\t]\r\n}\r\n\r\n```\r\n\r\n\r\n## how to use\r\n\r\n* 重写`src/analy/script.py`中的`filter`方法，将url符合提取要求的函数筛选出来\r\n* 重写`src/analy/script.py`中的`parse`方法，parse方法的函数参数为`body`,使用`bs4`等进行解析或者存储\r\n\r\n\r\n\r\n## LISCENSE\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2015 Xiaodong Cun\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}